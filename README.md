# Project Mafia

Пример Telegram-бота и Mini App для игры в мафию с нестандартными ролями.

## Быстрый старт
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Задайте переменные окружения:
   - `BOT_TOKEN` — токен Telegram-бота
   - `MINI_APP_URL` — публичная ссылка на Mini App/веб-клиент
3. Запустите сервер (бот стартует в режиме long polling вместе с API Mini App):
   ```bash
   python src/bot.py
   ```

## Возможности бота
- `/start` — кнопки для запуска игры, информации о ролях и открытия Mini App.
- `/info` — краткое описание ролей.
- Inline-кнопки для перехода в Mini App.

## API Mini App
Работает на FastAPI (порт 8000 по умолчанию).

- `POST /api/games` — создать игру. Тело: `{ "slots": 4-12, "roles": ["Мафия", "Детектив", ...] }`. Возвращает код лобби.
- `POST /api/games/{code}/join` — присоединиться к игре. Тело: `{ "user_id": 1, "name": "Игрок" }`.
- `POST /api/games/{code}/start` — стартовать, назначает роли.
- `GET /api/games/{code}` — статус игры.

Мини-приложение хранит состояние в памяти процесса и подходит для демо/прототипов.
